@page "/book-api"
@using DemoRefit.Models

<h3>Book API Demo</h3>
<h5>Last api call : @_lastApiCall</h5>

<EditForm Model="@book">
    <div class="mb-3">
        <label for="id">Id</label>
        <InputNumber id="id" class="form-control" @bind-Value="book.Id" />
    </div>

    <div class="mb-3">
        <label for="title">Title</label>
        <InputText id="title" class="form-control" @bind-Value="book.Title" />
    </div>

    <div class="mb-3 form-check">
        <InputCheckbox id="sortAsc" class="form-check-input" @bind-Value="_parameters.SortAsc" />
        <label for="sortAsc" class="form-check-label">Tri ascendant</label>
    </div>

    <div class="mb-3">
        <label for="limit">Nombre max de livres à retourner</label>
        <InputNumber id="limit" class="form-control" @bind-Value="_parameters.Limit" />
    </div>

    <div class="mb-3">
        <label for="ids">Ids (séparés par des virgules)</label>
        <InputText id="ids" class="form-control" @bind-Value="_idsInput" />
    </div>

    <div class="mb-2">
        <button class="btn btn-info me-2" @onclick="GetAllBooks">GET ALL</button>
        <button class="btn btn-primary me-2" @onclick="GetBook">GET</button>
        <button class="btn btn-success me-2" @onclick="PostBook">POST</button>
        <button class="btn btn-warning me-2" @onclick="PutBook">PUT</button>
        <button class="btn btn-danger me-2" @onclick="DeleteBook">DELETE</button>
    </div>
</EditForm>

@if (!string.IsNullOrEmpty(message))
{
    <div class="alert alert-info mt-3">@message</div>
}

@if (books?.Any() == true)
{
    <h5 class="mt-4">Liste des livres :</h5>
    <ul class="list-group">
        @foreach (var b in books)
        {
            <li class="list-group-item">Id: @b.Id – Titre: @b.Title</li>
        }
    </ul>
}